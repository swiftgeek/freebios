arch i386
mainboardinit cpu/i386/entry16.inc 
ldscript cpu/i386/entry16.lds 
mainboardinit cpu/i386/entry32.inc
mainboardinit cpu/i386/reset16.inc USE_FALLBACK_IMAGE
ldscript cpu/i386/reset16.lds USE_FALLBACK_IMAGE
mainboardinit cpu/i386/reset32.inc USE_NORMAL_IMAGE
ldscript cpu/i386/reset32.lds USE_NORMAL_IMAGE

option ROM_IMAGE_SIZE=32768
rambase 0x00008000
option USE_CACHE_RAM=1
option CACHE_RAM_BASE=0xfff70000
option CACHE_RAM_SIZE=0x00010000
nooption USE_DEFAULT_LAYOUT
option STACK_SIZE=0x2000
option USE_FALLBACK_BOOT=1

#/* falback */
option ZKERNEL_START=0xffff0000
option _ROMBASE=     0xffff8000 
option XIP_ROM_BASE= 0xffff8000
option XIP_ROM_SIZE= 0x00008000
##/* normal image */
#option ZKERNEL_START=0xfff80000
#option _ROMBASE=     0xfffe8000 
#option XIP_ROM_BASE= 0xfffe8000
#option XIP_ROM_SIZE= 0x00008000

mainboardinit northbridge/intel/82860/reset_test.inc
mainboardinit arch/i386/lib/noop_failover.inc USE_NORMAL_IMAGE
mainboardinit southbridge/intel/82801/cmos_failover.inc USE_FALLBACK_IMAGE
ldscript arch/i386/lib/failover.lds USE_FALLBACK_IMAGE

mainboardinit cpu/i786/earlymtrr.inc

mainboardinit superio/winbond/w83627hf/setup_serial.inc
mainboardinit pc80/serial.inc
mainboardinit arch/i386/lib/console.inc

#mainboardinit ram/ramtest.inc
#mainboardinit northbridge/intel/82860/reset_test.inc
mainboardinit cpu/i786/cache_ram_init.inc
#mainboardinit mainboard/supermicro/p4dc6/cache_test.inc
mainboardinit cpu/i786/cache_ram_start.inc
mainboardinit cpu/i786/cache_ram_fini.inc

northbridge intel/82860
southbridge intel/82801
southbridge intel/82806


nsuperio winbond/w83627hf com1={1} com2={1} floppy=1 lpt=1 keyboard=1

option RAMTEST=1
option NO_KEYBOARD
option ENABLE_FIXED_AND_VARIABLE_MTRRS
#option FINAL_MAINBOARD_FIXUP

object cacheramtest.o
object mainboard.o
object mtrr_values.o
object mptable.o HAVE_MP_TABLE
object irq_tables.o HAVE_PIRQ_TABLE
#keyboard pc80
dir ../../../pc80
dir /src/superio/winbond/w83627hf

# FIXME are the SMBUS DIMM locations documented anywhere? 
option SMBUS_MEM_DEVICE_START=(0xa << 3)
option SMBUS_MEM_DEVICE_END=(SMBUS_MEM_DEVICE_START +3)
option SMBUS_MEM_DEVICE_INC=1
option SIO_BASE=0x2e
option SIO_SYSTEM_CLK_INPUT=SIO_SYSTEM_CLK_INPUT_48MHZ
option SMP=1
option IOAPIC=1
option HAVE_MP_TABLE=1
option HAVE_PIRQ_TABLE=1
option MAX_CPUS=2
option HAVE_MTRR_TABLE=1
#option FINAL_MAINBOARD_FIXUP=1
option HAVE_HARD_RESET=1
nooption MEMORY_HOLE

cpu p5
cpu p6
cpu i786
